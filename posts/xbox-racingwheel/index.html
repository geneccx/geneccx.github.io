<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Getting an Xbox One Only Racing Wheel Working on Windows | Gene's Blog</title><meta name=keywords content="xbox,bestbuy sucks,auction,racing">
<meta name=description content="Backstory Feel free to jump to the technical details if you hate stories (you monster).
I&rsquo;ve always been somewhat interested in racing games. However, the barrier to entry can be quite high. Racing wheels start at about $120 CAD plus another $60 for a game. I was interested, but not $200 interested.
The past year, my sister introduced me to Amazon return auctions. Auctioneers will buy pallets from Amazon full of returned items (which they would otherwise just toss away&mldr; so wasteful.">
<meta name=author content>
<link rel=canonical href=https://geneccx.github.io/posts/xbox-racingwheel/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css integrity="sha256-yIlj/i15RiAA/Q+xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.4dcb3c4f38462f66c6b6137227726f5543cb934cca9788f041c087e374491df2.js integrity="sha256-Tcs8TzhGL2bGthNyJ3JvVUPLk0zKl4jwQcCH43RJHfI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://geneccx.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://geneccx.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://geneccx.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://geneccx.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://geneccx.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Getting an Xbox One Only Racing Wheel Working on Windows">
<meta property="og:description" content="Backstory Feel free to jump to the technical details if you hate stories (you monster).
I&rsquo;ve always been somewhat interested in racing games. However, the barrier to entry can be quite high. Racing wheels start at about $120 CAD plus another $60 for a game. I was interested, but not $200 interested.
The past year, my sister introduced me to Amazon return auctions. Auctioneers will buy pallets from Amazon full of returned items (which they would otherwise just toss away&mldr; so wasteful.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://geneccx.github.io/posts/xbox-racingwheel/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-03-09T01:18:36-08:00">
<meta property="article:modified_time" content="2022-03-09T01:18:36-08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Getting an Xbox One Only Racing Wheel Working on Windows">
<meta name=twitter:description content="Backstory Feel free to jump to the technical details if you hate stories (you monster).
I&rsquo;ve always been somewhat interested in racing games. However, the barrier to entry can be quite high. Racing wheels start at about $120 CAD plus another $60 for a game. I was interested, but not $200 interested.
The past year, my sister introduced me to Amazon return auctions. Auctioneers will buy pallets from Amazon full of returned items (which they would otherwise just toss away&mldr; so wasteful.">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://geneccx.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Getting an Xbox One Only Racing Wheel Working on Windows","item":"https://geneccx.github.io/posts/xbox-racingwheel/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Getting an Xbox One Only Racing Wheel Working on Windows","name":"Getting an Xbox One Only Racing Wheel Working on Windows","description":"Backstory Feel free to jump to the technical details if you hate stories (you monster).\nI\u0026rsquo;ve always been somewhat interested in racing games. However, the barrier to entry can be quite high. Racing wheels start at about $120 CAD plus another $60 for a game. I was interested, but not $200 interested.\nThe past year, my sister introduced me to Amazon return auctions. Auctioneers will buy pallets from Amazon full of returned items (which they would otherwise just toss away\u0026hellip; so wasteful.","keywords":["xbox","bestbuy sucks","auction","racing"],"articleBody":"Backstory Feel free to jump to the technical details if you hate stories (you monster).\nI‚Äôve always been somewhat interested in racing games. However, the barrier to entry can be quite high. Racing wheels start at about $120 CAD plus another $60 for a game. I was interested, but not $200 interested.\nThe past year, my sister introduced me to Amazon return auctions. Auctioneers will buy pallets from Amazon full of returned items (which they would otherwise just toss away‚Ä¶ so wasteful.) It‚Äôs quite fun to hunt for bargains!\nAs it turns out, this time around there was a Thrustmaster Ferrari 458 Spider Edition listed as one of the lots. Brand new! I was able to win it for a fantastic price, along with a shiny new air fryer and some fancy LED lights. Sweet haul.\nLater on during the week, my sister dropped off the haul (thanks sis!) and I was excited to play with my new toys.\n  Ferrari 458 Spider EditionWell you probably see where this is going, or there would be no blog post.\n  I plugged the racing into my PC, ready to race. I booted up Forza Horizon 4 AAAAAND‚Ä¶\nNothing. The wheel wouldn‚Äôt steer. The buttons didn‚Äôt work. The acceleration and breaks didn‚Äôt do anything. I thought this was PC compatible! Alas, there would be no racing üò¢. Tragic day.\nBewildered, I started googling for more details.\nOn the Thrustmaster support page, it says that the same wheel is not supported on PC:\n The Ferrari 458 Spider RW is an Xbox One compliant racing wheel.\nIt is not supported by Windows platforms, and there are no drivers for it to work on Windows.\n False advertisement from Best Buy. Thanks for nothing üò°.\nOver the course of the next ten minutes, I went through the five stages of grief. This really sucked! All of my other auction winnings were great. This one stuck out as a sore thumb. Would I have to sell this steering wheel and buy a new one? Ugh, so much work.\nBut enough grieving. It was time to act. I wasn‚Äôt about to admit defeat. I can accept that it there are no drivers on PC‚Ä¶ yet.\nSo, like a totally normal and rational person, rather than just buying a compatible wheel, I decided that the optimal course of action would be to write a driver for this racing wheel. It‚Äôs the best use of my time, trust me. I‚Äôm totally not being stubborn right?!\nSpeaking of positive traits, being the lazy efficient person that I am, I knew that the first thing to do when approaching a problem is to find someone else‚Äôs solution. After all, ‚ÄúKnowledge is power, France is bacon‚Äù.\nBack to googling.\nThe Research After some searching, I landed upon https://linustechtips.com/topic/576104-how-to-use-thrustmaster-ferrari-458-spyder-steering-wheel-on-pc/. Here, a user named Endend linked to a driver for the Xbox One controller, which supposedly works for the wheel.\nI installed it and tested it out. All the buttons worked on the wheel, but not the actual steering or the pedals. The Windows device manager still showed the wheel as a generic device:\nHowever, scrolling a bit further down in the thread, I found this curiosity:\nIt looks like this person‚Äôs copy of Forza Horizon 4 was able to detect the wheel, and what‚Äôs more, was actually fully working. How is this possible?\nAs it turns out, Microsoft games support this racing wheel natively. I had Forza Horizon 4 on Steam, but for whatever reason, that did not work. So I signed up for the $1 trial of Xbox game pass and installed Forza Horizon 5 from the Xbox store:\nIt works, but how?\nAs it turns out, Xbox One games can be written using the Universal Windows Platform. Digging into the game programming section, I found specific support for Racing wheel and force feedback through an API called Windows.Gaming.Input.\nHowever, games had to specifically use this API in order to interact with my racing wheel, and pretty much the only ones that do that are the ones on the Xbox store, not on Steam.\nTechnical Details The Thrustmaster Ferrari 458 Spider doesn‚Äôt work on PC for anything other than those on the Xbox store.\nI however, endeavored to changed that. So I did a bunch of research and was able to learn all the different ways to do controller support.\nWhat do games use for controller (and racing wheel) support?\n DirectInput. A super old interface to communicate and process data from hardware devices. This is not very commonly used as it‚Äôs a lot of heavy lifting. XInput. The more modern (but still quite old) way of doing it. This technically was designed specifically for Xbox 360 controllers, so all the buttons correspond to those on the Xbox 360 controller. Windows.Gaming.Input. This is the most modern one that I just found out about. Most games don‚Äôt use this as it comes with a nasty limitation: the game window must be focused in order to interact with any controllers. There‚Äôs also Steam Input. This is Valve‚Äôs custom way of trying to unify all these APIs. It works by intercepting the above APIs that games may use, and adding their own layer. This allows them to do really cool stuff, like custom controller mappings (so you can change what buttons correspond to what actions) and remote play - using a controller over the internet, so you can play multiplayer games with your friends, or stream to your TV and play from your sofa. Sadly, this doesn‚Äôt work with racing wheels, as it‚Äôs really only meant for controllers.  So now I had a plan. I would write my own version of XInput, which would translate all of the game‚Äôs requests to use the new Windows.Gaming.InputAPI.\nThe approach was this:\n Convert the RacingWheelReading.Wheel reading from an angle to the Xbox 360 controller‚Äôs joystick left and right Translate the acceleration and break pedals to L and R triggers Map the rest of the buttons to Xbox 360 controls. Replace the game‚Äôs version of the xinput library so that I could use my translation layer.  This required me to get familiar with the XInput API. Luckily, it‚Äôs actually quite simple and really only consists of a few functions.\nPerhaps even luckier, someone else had attempted a translation layer from XInput to Windows.Gaming.Input. However, this was for adding force feedback support for the triggers to the Xbox One controller.\nNow to adapt that to racing wheel support. I found that this driver uses the XInput subtype of XINPUT_DEVSUBTYPE_GAMEPAD. Since I was actually implementing a racing wheel, I used XINPUT_DEVSUBTYPE_WHEEL. Microsoft actually had some extremely helpful documentation here for how to do the proper mappings:\n Racing wheel controller. Left Stick X reports the wheel rotation, Right Trigger is the acceleration pedal, and Left Trigger is the brake pedal. Includes Directional Pad and most standard buttons (A, B, X, Y, START, BACK, LB, RB). LSB and RSB are optional.\n Perfect. So now let‚Äôs glue it all together. Here‚Äôs the snippet of code that takes the wheel rotation and translates it into the left stick‚Äôs X value:\n\tpState-Gamepad.sThumbLX = (state.Wheel = 0) ?  state.Wheel * 32767 : state.Wheel * 32768; And for the acceleration and breaks:\n\tpState-Gamepad.bRightTrigger = state.Throttle * 255; \tpState-Gamepad.bLeftTrigger = state.Brake * 255; The rest was just a matter of trial and error to figure out which buttons corresponded to which.\nI replaced my Steam version of Forza Horizon 4‚Äôs with my custom XInput1_3.dll, and booted the game up. I‚Äôm happy to report that it all worked perfectly!\nAs a bonus, I also downloaded the Euro Truck Simulator 2 Demo on Steam and tested it there. They‚Äôre using XInput 1.4, but luckily it worked even though I just renamed my wrapper to XInput1_4.dll.\nThe Result   I cut the video at an awkward time because I‚Äôm a terrible driver and I crashed my car immediately afterwards. Also you should never hold a phone and film while driving. Also my cat distracted me.\nI‚Äôve made the source code available for my project on GitHub. It still needs some cleanup but there‚Äôs enough to get everything going. You‚Äôll have to compile it for yourself though.\nI‚Äôm not sure what I‚Äôll write up next, but I have a huge backlog so worry not dear reader, there will be plenty more content to come.\nMaybe next time I‚Äôll write up how I got Hexic HD (an Xbox One only game) working on the PC without an emulator. It‚Äôs a weird coincidence that these projects are Xbox related.\nClosing My goal with this blog is to practice communicating in a way that is concise, lighthearted, and engaging, while still remaining technical. How‚Äôd I do? If you have some suggestions on how I can improve my writing, I‚Äôd greatly appreciate it. At any rate, thanks for stopping by.\nBye for now! üëã\n","wordCount":"1472","inLanguage":"en","datePublished":"2022-03-09T01:18:36-08:00","dateModified":"2022-03-09T01:18:36-08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://geneccx.github.io/posts/xbox-racingwheel/"},"publisher":{"@type":"Organization","name":"Gene's Blog","logo":{"@type":"ImageObject","url":"https://geneccx.github.io/favicon.ico"}}}</script>
</head><body class=dark id=top>
<script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://geneccx.github.io/ accesskey=h title="Gene's Blog (Alt + H)">Gene's Blog</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div><ul id=menu>
<li>
<a href=https://geneccx.github.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li><li>
<a href=https://geneccx.github.io/categories/ title=Categories>
<span>Categories</span>
</a>
</li><li>
<a href=https://geneccx.github.io/tags/ title=Tags>
<span>Tags</span>
</a>
</li><li>
<a href=https://geneccx.github.io/archives title=Archives>
<span>Archives</span>
</a>
</li></ul></nav></header><main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=https://geneccx.github.io/>Home</a>&nbsp;¬ª&nbsp;<a href=https://geneccx.github.io/posts/>Posts</a></div><h1 class=post-title>
Getting an Xbox One Only Racing Wheel Working on Windows
</h1><div class=post-meta><span title="2022-03-09 01:18:36 -0800 -0800">March 9, 2022</span>&nbsp;¬∑&nbsp;7 min
</div></header><div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>Table of Contents</span>
</summary>
<div class=inner><ul>
<li>
<a href=#backstory aria-label=Backstory>Backstory</a></li><li>
<a href=#the-research aria-label="The Research">The Research</a></li><li>
<a href=#technical-details aria-label="Technical Details">Technical Details</a></li><li>
<a href=#the-result aria-label="The Result">The Result</a></li><li>
<a href=#closing aria-label=Closing>Closing</a>
</li></ul></div></details>
</div><div class=post-content><h3 id=backstory>Backstory<a hidden class=anchor aria-hidden=true href=#backstory>#</a></h3><p><strong>Feel free to jump to the <a href=#technical-details>technical details</a></strong> if you hate stories (you <em>monster</em>).</p><p>I&rsquo;ve always been somewhat interested in racing games. However, the barrier to entry can be quite high. <a href=https://www.reddit.com/r/simracing/wiki/buyingguide#wiki_section_one.3A_the_wheels>Racing wheels start at about $120 CAD</a> plus another $60 for a game. I was interested, but not $200 interested.</p><p>The past year, my sister introduced me to Amazon return auctions. Auctioneers will buy pallets from Amazon full of returned items (which they would otherwise just toss away&mldr; so wasteful.)
It&rsquo;s quite fun to hunt for bargains!</p><p>As it turns out, this time around there was a <a href=https://www.bestbuy.ca/en-ca/product/thrustmaster-thrustmaster-racing-wheel-ferrari-458-spider-edition-for-xbox-one-663296419583/10293418>Thrustmaster Ferrari 458 Spider Edition</a> listed as one of the lots. Brand new! I was able to win it for a fantastic price, along with a shiny new air fryer and some fancy LED lights. Sweet haul.</p><p>Later on during the week, my sister dropped off the haul (thanks sis!) and I was excited to play with my new toys.</p><figure>
<img loading=lazy src=image-20220309012810385.png alt="Well you probably see where this is going, or there would be no blog post." width=480px> <figcaption>
Ferrari 458 Spider Edition<p>Well you probably see where this is going, or there would be no blog post.</p></figcaption></figure><p>I plugged the racing into my PC, ready to race. I booted up Forza Horizon 4 AAAAAND&mldr;</p><p>Nothing. The wheel wouldn&rsquo;t steer. The buttons didn&rsquo;t work. The acceleration and breaks didn&rsquo;t do anything. I thought this was PC compatible! Alas, there would be no racing üò¢. Tragic day.</p><p>Bewildered, I started googling for more details.</p><p>On the <a href=https://support.thrustmaster.com/en/kb/104-en/>Thrustmaster support page</a>, it says that the same wheel is not supported on PC:</p><blockquote>
<p>The Ferrari 458 Spider RW is an Xbox One compliant racing wheel.<br>
It is not supported by Windows platforms, and there are no drivers for it to work on Windows.</p></blockquote><p>False advertisement from Best Buy. Thanks for nothing üò°.</p><p>Over the course of the next ten minutes, I went through the five stages of grief. This really sucked! All of my other auction winnings were great. This one stuck out as a sore thumb. Would I have to sell this steering wheel and buy a new one? Ugh, so much work.</p><p>But enough grieving. It was time to act. I wasn&rsquo;t about to admit defeat. I can accept that it there are no drivers on PC&mldr; <em>yet</em>.</p><p>So, like a totally normal and rational person, rather than just buying a compatible wheel, I decided that the optimal course of action would be to write a driver for this racing wheel. It&rsquo;s the best use of my time, <em>trust me</em>. I&rsquo;m totally not being stubborn right?!</p><p>Speaking of positive traits, being the <del>lazy</del> efficient person that I am, I knew that the first thing to do when approaching a problem is to find someone else&rsquo;s solution. After all, &ldquo;Knowledge is power, <a href=https://knowyourmeme.com/memes/france-is-bacon>France is bacon</a>&rdquo;.</p><p>Back to googling.</p><h3 id=the-research>The Research<a hidden class=anchor aria-hidden=true href=#the-research>#</a></h3><p>After some searching, I landed upon <a href=https://linustechtips.com/topic/576104-how-to-use-thrustmaster-ferrari-458-spyder-steering-wheel-on-pc/>https://linustechtips.com/topic/576104-how-to-use-thrustmaster-ferrari-458-spyder-steering-wheel-on-pc/</a>. Here, a user named Endend linked to a driver for the Xbox One controller, which supposedly works for the wheel.</p><p>I installed it and tested it out. All the buttons worked on the wheel, but not the actual steering or the pedals. The Windows device manager still showed the wheel as a generic device:</p><p><img loading=lazy src=image-20220310002410759.png alt=image-20220310002410759>
</p><p>However, scrolling a bit further down in the thread, I found this curiosity:</p><p><img loading=lazy src=2020-09-26.thumb.png.ae767536c3ce3a502cd0815bb57ef3f9.png alt=2020-09-26.thumb.png.ae767536c3ce3a502cd0815bb57ef3f9.png>
</p><p>It looks like this person&rsquo;s copy of Forza Horizon 4 was able to detect the wheel, and what&rsquo;s more, was actually fully working. How is this possible?</p><p>As it turns out, Microsoft games support this racing wheel natively. I had Forza Horizon 4 on Steam, but for whatever reason, that did not work. So I signed up for the $1 trial of Xbox game pass and installed Forza Horizon 5 from the Xbox store:</p><p><img loading=lazy src=image-20220310002251996.png alt=image-20220310002251996>
</p><p>It works, but how?</p><p>As it turns out, Xbox One games can be written using the <a href=https://docs.microsoft.com/en-us/windows/uwp/xbox-apps/>Universal Windows Platform</a>. Digging into the game programming section, I found specific support for <a href=https://docs.microsoft.com/en-us/windows/uwp/gaming/racing-wheel-and-force-feedback>Racing wheel and force feedback</a> through an API called <a href=https://docs.microsoft.com/en-us/uwp/api/windows.gaming.input>Windows.Gaming.Input</a>.</p><p>However, games had to specifically use this API in order to interact with my racing wheel, and pretty much the only ones that do that are the ones on the Xbox store, not on Steam.</p><h3 id=technical-details>Technical Details<a hidden class=anchor aria-hidden=true href=#technical-details>#</a></h3><p>The Thrustmaster Ferrari 458 Spider doesn&rsquo;t work on PC for anything other than those on the Xbox store.</p><p>I however, endeavored to changed that. So I did a bunch of research and was able to learn all the different ways to do controller support.</p><p>What do games use for controller (and racing wheel) support?</p><ul>
<li><strong>DirectInput</strong>. A super old interface to communicate and process data from hardware devices. This is not very commonly used as it&rsquo;s a lot of heavy lifting.</li><li><strong>XInput</strong>. The more modern (but still quite old) way of doing it. This technically was designed specifically for Xbox 360 controllers, so all the buttons correspond to those on the Xbox 360 controller.</li><li><strong>Windows.Gaming.Input</strong>. This is the most modern one that I just found out about. Most games don&rsquo;t use this as it comes with a nasty limitation: the game window must be focused in order to interact with any controllers.</li><li>There&rsquo;s also <strong>Steam Input</strong>. This is Valve&rsquo;s custom way of trying to unify all these APIs. It works by intercepting the above APIs that games may use, and adding their own layer. This allows them to do really cool stuff, like custom controller mappings (so you can change what buttons correspond to what actions) and remote play - using a controller over the internet, so you can play multiplayer games with your friends, or stream to your TV and play from your sofa. Sadly, this doesn&rsquo;t work with racing wheels, as it&rsquo;s really only meant for controllers.</li></ul><p>So now I had a plan. I would write my own version of XInput, which would translate all of the game&rsquo;s requests to use the new <code>Windows.Gaming.Input</code>API.</p><p>The approach was this:</p><ul>
<li>Convert the <code>RacingWheelReading.Wheel</code> reading from an angle to the Xbox 360 controller&rsquo;s joystick left and right</li><li>Translate the acceleration and break pedals to L and R triggers</li><li>Map the rest of the buttons to Xbox 360 controls.</li><li>Replace the game&rsquo;s version of the xinput library so that I could use my translation layer.</li></ul><p>This required me to get familiar with the <a href=https://docs.microsoft.com/en-us/windows/win32/xinput/programming-guide>XInput API</a>. Luckily, it&rsquo;s actually quite simple and really only consists of a few functions.</p><p>Perhaps even luckier, someone else had attempted a translation layer from XInput to <code>Windows.Gaming.Input</code>. However, this was for <a href=https://github.com/araghon007/X1nput>adding force feedback support for the triggers to the Xbox One controller</a>.</p><p>Now to adapt that to racing wheel support. I found that this driver uses the <a href=https://docs.microsoft.com/en-us/windows/win32/xinput/xinput-and-controller-subtypes>XInput subtype</a> of <code>XINPUT_DEVSUBTYPE_GAMEPAD</code>. Since I was actually implementing a racing wheel, I used <code>XINPUT_DEVSUBTYPE_WHEEL</code>. Microsoft actually had some extremely helpful documentation here for how to do the proper mappings:</p><blockquote>
<p>Racing wheel controller.
Left Stick X reports the wheel rotation, Right Trigger is the acceleration pedal, and Left Trigger is the brake pedal. Includes Directional Pad and most standard buttons (A, B, X, Y, START, BACK, LB, RB). LSB and RSB are optional.</p></blockquote><p>Perfect. So now let&rsquo;s glue it all together. Here&rsquo;s the snippet of code that takes the wheel rotation and translates it into the left stick&rsquo;s X value:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C++ data-lang=C++><span style=display:flex><span>		pState<span style=color:#f92672>-&gt;</span>Gamepad.sThumbLX <span style=color:#f92672>=</span> (state.Wheel <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>0</span>) <span style=color:#f92672>?</span>
</span></span><span style=display:flex><span>            state.Wheel <span style=color:#f92672>*</span> <span style=color:#ae81ff>32767</span> <span style=color:#f92672>:</span> state.Wheel <span style=color:#f92672>*</span> <span style=color:#ae81ff>32768</span>;
</span></span></code></pre></div><p>And for the acceleration and breaks:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C++ data-lang=C++><span style=display:flex><span>		pState<span style=color:#f92672>-&gt;</span>Gamepad.bRightTrigger <span style=color:#f92672>=</span> state.Throttle <span style=color:#f92672>*</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>		pState<span style=color:#f92672>-&gt;</span>Gamepad.bLeftTrigger <span style=color:#f92672>=</span> state.Brake <span style=color:#f92672>*</span> <span style=color:#ae81ff>255</span>;
</span></span></code></pre></div><p>The rest was just a matter of trial and error to figure out which buttons corresponded to which.</p><p>I replaced my Steam version of Forza Horizon 4&rsquo;s with my custom <code>XInput1_3.dll</code>, and booted the game up. I&rsquo;m happy to report that it all worked perfectly!</p><p>As a bonus, I also downloaded the Euro Truck Simulator 2 Demo on Steam and tested it there. They&rsquo;re using XInput 1.4, but luckily it worked even though I just renamed my wrapper to <code>XInput1_4.dll</code>.</p><h3 id=the-result>The Result<a hidden class=anchor aria-hidden=true href=#the-result>#</a></h3><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden>
<iframe src=https://www.youtube.com/embed/2RIzJg6qcNY style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe>
</div><br>
<p>I cut the video at an awkward time because I&rsquo;m a terrible driver and I crashed my car immediately afterwards. Also you should never hold a phone and film while driving. Also my cat distracted me.</p><p>I&rsquo;ve made the source code available for my project <a href=https://github.com/geneccx/X1nput>on GitHub</a>. It still needs some cleanup but there&rsquo;s enough to get everything going. You&rsquo;ll have to compile it for yourself though.</p><p>I&rsquo;m not sure what I&rsquo;ll write up next, but I have a huge backlog so worry not dear reader, there will be plenty more content to come.</p><p>Maybe next time I&rsquo;ll write up how I got <a href=https://www.xbox.com/en-US/games/store/hexic-hd/BXHL9BJH9XKC>Hexic HD</a> (an Xbox One only game) working on the PC without an emulator. It&rsquo;s a weird coincidence that these projects are Xbox related.</p><h3 id=closing>Closing<a hidden class=anchor aria-hidden=true href=#closing>#</a></h3><p>My goal with this blog is to practice communicating in a way that is concise, lighthearted, and engaging, while still remaining technical. How&rsquo;d I do? If you have some suggestions on how I can improve my writing, I&rsquo;d greatly appreciate it. At any rate, thanks for stopping by.</p><p>Bye for now! üëã</p></div><footer class=post-footer>
<ul class=post-tags>
<li><a href=https://geneccx.github.io/tags/xbox/>xbox</a></li><li><a href=https://geneccx.github.io/tags/bestbuy-sucks/>bestbuy sucks</a></li><li><a href=https://geneccx.github.io/tags/auction/>auction</a></li><li><a href=https://geneccx.github.io/tags/racing/>racing</a></li></ul></footer><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css>
<div id=comment-section></div><script>initComments({node:document.getElementById("comment-section"),defaultHomeserverUrl:"https://matrix.cactus.chat:8448",serverName:"cactus.chat",siteName:"geneccx",commentSectionId:"aHR0cHM6Ly9nZW5lY2N4LmdpdGh1Yi5pby9wb3N0cy94Ym94LXJhY2luZ3doZWVsLw=="})</script>
<noscript>Please enable JavaScript to view the <a href=https://cactus.chat>comments powered by Cactus Comments.</a></noscript></article></main><footer class=footer>
<span>&copy; 2022 <a href=https://geneccx.github.io/>Gene's Blog</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script>
<script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script>
</body></html>